## macrotask 宏任务和microtask 微任务

### 什么是宏任务和微任务

- 宏任务,在dom渲染之后执行
setTimeout
setInterval
setImmediate
Ajax
Dom事件

- 微任务,在dom渲染之前执行
Promise
async await 


微任务执行时机比宏任务要早，


### EventLoop和dom渲染

JS是单线程的，而且和dom渲染共用一个线程
JS执行的时候，得留一些时机供dom渲染


1. callStack清空（即同步任务执行完），尝试dom渲染，启动EventLoop机制


## 从event loop解释,为何微任务执行更早

因为Promise是ES规范,不是W3c规范


promise微任务进的是 micro task queue,
settimeout宏任务进的是callback queue队列


## 执行顺序总结

1. call stack清空
2. 执行当前的微任务
3. 尝试dom渲染
4. 触发Event Loop